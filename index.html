<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Rafael Nutri • Calculadora Nutricional</title>

  <style>
    :root{
      --bg:#eef4fb;
      --panel:#ffffff;

      --primary:#0d78c1;
      --primary-2:#0b4f7d;

      --text:#0f172a;
      --sub:#475569;
      --border:#dbe7f5;

      --shadow:0 14px 40px rgba(15,23,42,.08);
      --radius:18px;
    }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--text);
      background:
        radial-gradient(900px 500px at 18% 0%, rgba(13,120,193,.12), transparent 60%),
        radial-gradient(700px 450px at 100% 10%, rgba(11,79,125,.10), transparent 55%),
        var(--bg);
    }

    .wrap{
      max-width:980px;
      margin:0 auto;
      padding:14px 12px 26px;
    }

    .panel{
      background:rgba(255,255,255,.92);
      border:1px solid rgba(219,231,245,.95);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      overflow:hidden;
      backdrop-filter:saturate(1.05) blur(6px);
    }

    /* ✅ Banner estilo “capa” (bonito no celular) */
    .hero{
      position:relative;
      background:#000;
      overflow:hidden;
    }
    .hero img{
      width:100%;
      height:220px;           /* altura fixa no mobile (não fica gigante) */
      object-fit:cover;       /* corta bonito */
      object-position:right;  /* puxa pro lado do rosto */
      display:block;
      filter:contrast(1.02) saturate(1.02);
    }

    /* degradê sutil só embaixo (não “lava” o banner) */
    .hero::after{
      content:"";
      position:absolute;
      left:0; right:0; bottom:0;
      height:70px;
      background:linear-gradient(to bottom, rgba(0,0,0,0), rgba(238,244,251,1));
      pointer-events:none;
    }

    /* “assinatura” em cima do banner */
    .heroTitle{
      position:absolute;
      left:14px;
      right:14px;
      bottom:12px;
      z-index:2;
      display:flex;
      flex-direction:column;
      gap:3px;
      color:#fff;
      text-shadow:0 10px 26px rgba(0,0,0,.55);
    }
    .heroTitle .h1{
      font-weight:950;
      letter-spacing:.2px;
      line-height:1.15;
      font-size:18px;
    }
    .heroTitle .insta{
      font-size:12px;
      opacity:.9;
    }

    .content{ padding:14px 14px 18px; }

    /* aviso curto logo após o banner */
    .disclaimerBalloon{
      margin-top:8px;
      padding:11px 14px;
      border-radius:14px;
      background:linear-gradient(180deg, rgba(255,255,255,.95), rgba(248,250,252,.95));
      border:1px solid rgba(13,120,193,.14);
      border-left:5px solid var(--primary);
      font-size:12px;
      color:#334155;
      box-shadow:0 10px 22px rgba(15,23,42,.05);
    }

    .grid{
      display:grid;
      grid-template-columns:1fr;
      gap:12px;
      margin-top:14px;
    }

    .field{ display:flex; flex-direction:column; gap:6px; }

    label{ font-size:12px; color:var(--sub); }

    input,select{
      width:100%;
      padding:12px;
      border-radius:14px;
      border:1px solid rgba(203,218,238,.95);
      font-size:14px;
      background:#fff;
      box-shadow:0 8px 18px rgba(15,23,42,.04);
    }

    input:focus,select:focus{
      outline:none;
      border-color:rgba(13,120,193,.8);
      box-shadow:0 0 0 3px rgba(13,120,193,.15), 0 10px 24px rgba(15,23,42,.06);
    }

    .biotipoInfo{
      margin-top:10px;
      padding:12px;
      border-radius:16px;
      background:linear-gradient(180deg, rgba(13,120,193,.10), rgba(13,120,193,.06));
      border:1px solid rgba(13,120,193,.16);
      font-size:12px;
      color:#334155;
      line-height:1.45;
    }
    .biotipoInfo strong{
      display:block;
      margin-bottom:6px;
      color:var(--primary-2);
      font-weight:950;
    }
    .biotipoInfo ul{ margin:8px 0 0 18px; padding:0; }
    .biotipoInfo .mini{
      margin-top:10px;
      padding:10px 12px;
      border-radius:14px;
      background:rgba(255,255,255,.92);
      border:1px solid rgba(13,120,193,.18);
      box-shadow:0 10px 22px rgba(15,23,42,.05);
    }

    .cards{
      display:grid;
      grid-template-columns:1fr;
      gap:12px;
      margin-top:14px;
    }

    .card{
      background:rgba(255,255,255,.92);
      border:1px solid rgba(203,218,238,.85);
      border-radius:18px;
      padding:14px;
      box-shadow:0 12px 26px rgba(15,23,42,.06);
    }

    .card h3{
      margin:0 0 8px 0;
      font-size:12px;
      color:var(--sub);
      font-weight:800;
    }

    .big{
      font-size:26px;
      font-weight:950;
      color:#0f172a;
      line-height:1;
    }

    .small{
      margin-top:6px;
      font-size:12px;
      color:var(--sub);
      line-height:1.45;
    }

    .howBox{
      margin-top:10px;
      padding:12px;
      border-radius:16px;
      background:linear-gradient(180deg, rgba(13,120,193,.10), rgba(13,120,193,.06));
      border:1px solid rgba(13,120,193,.16);
      box-shadow:0 12px 26px rgba(15,23,42,.05);
    }
    .howTitle{ font-weight:950; color:var(--primary-2); font-size:12px; margin-bottom:6px; }
    .howList{ margin:0; padding-left:16px; }
    .howList li{ margin:6px 0; font-size:12px; color:#334155; }

    .bfScaleWrap{ margin-top:12px; }
    .bfTopRow{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-bottom:8px;
    }
    .bfBadge{
      font-size:11px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(13,120,193,.20);
      background:rgba(255,255,255,.95);
      color:var(--primary-2);
      white-space:nowrap;
      font-weight:900;
      box-shadow:0 8px 18px rgba(15,23,42,.05);
    }
    .bfScale{
      position:relative;
      height:14px;
      border-radius:999px;
      overflow:hidden;
      border:1px solid rgba(203,218,238,.95);
      background:linear-gradient(90deg,
        rgba(13,120,193,.22) 0%,
        rgba(13,120,193,.12) 25%,
        rgba(13,120,193,.08) 50%,
        rgba(13,120,193,.12) 75%,
        rgba(13,120,193,.22) 100%
      );
    }
    .bfNeedle{
      position:absolute;
      top:-10px;
      width:0;height:0;
      border-left:7px solid transparent;
      border-right:7px solid transparent;
      border-bottom:10px solid var(--primary-2);
      transform:translateX(-50%);
    }
    .bfDot{
      position:absolute;
      top:50%;
      width:10px;height:10px;
      border-radius:50%;
      background:var(--primary-2);
      transform:translate(-50%,-50%);
      box-shadow:0 10px 18px rgba(11,79,125,.25);
    }
    .bfLabels{
      display:flex;
      justify-content:space-between;
      margin-top:8px;
      font-size:11px;
      color:#64748b;
    }
    .bfLegend{
      margin-top:10px;
      padding:10px 12px;
      border-radius:14px;
      background:rgba(248,250,252,.92);
      border:1px solid rgba(203,218,238,.9);
      font-size:12px;
      color:#334155;
      line-height:1.45;
    }
    .bfInsight{
      margin-top:10px;
      padding:10px 12px;
      border-radius:14px;
      background:rgba(255,255,255,.92);
      border:1px solid rgba(13,120,193,.16);
      font-size:12px;
      color:#0f172a;
      line-height:1.45;
      box-shadow:0 10px 22px rgba(15,23,42,.05);
    }
    .bfInsight b{ color:var(--primary-2); }

    .resultBox{
      margin-top:12px;
      padding:14px;
      border-radius:18px;
      background:linear-gradient(180deg, rgba(13,120,193,.10), rgba(13,120,193,.06));
      border:1px solid rgba(13,120,193,.16);
      box-shadow:0 14px 30px rgba(15,23,42,.06);
    }
    .resultTitle{ font-weight:950; color:var(--primary-2); margin-bottom:8px; }
    .resultLine{ margin:6px 0; font-size:13px; color:#0f172a; line-height:1.45; }

    .ctaBox{ margin-top:16px; text-align:center; }
    .ctaButton{
      display:block;
      width:100%;
      padding:14px 16px;
      border-radius:16px;
      background:linear-gradient(135deg,var(--primary),var(--primary-2));
      color:#fff;
      font-weight:950;
      font-size:14px;
      text-decoration:none;
      box-shadow:0 14px 30px rgba(13,120,193,.30);
      transform:translateY(0);
      transition:transform .12s ease, box-shadow .12s ease;
    }
    .ctaButton:active{ transform:translateY(1px); box-shadow:0 10px 22px rgba(13,120,193,.24); }
    .ctaSub{ margin-top:6px; font-size:12px; color:#64748b; }

    .aviso{
      margin-top:14px;
      padding:14px;
      border-radius:16px;
      background:rgba(255,247,237,.92);
      border:1px solid rgba(254,215,170,.95);
      font-size:12px;
      color:#7c2d12;
      line-height:1.45;
      box-shadow:0 12px 26px rgba(15,23,42,.05);
    }
    .aviso strong{ display:block; margin-bottom:6px; color:#9a3412; font-weight:950; }

    .footer{
      margin-top:16px;
      padding-top:12px;
      border-top:1px solid rgba(203,218,238,.85);
      text-align:center;
      font-size:12px;
      color:#64748b;
      line-height:1.45;
    }

    .hidden{ display:none; }

    @media(min-width:860px){
      .wrap{ padding:22px 18px 34px; }
      .content{ padding:18px 20px 22px; }

      .grid{ grid-template-columns:1fr 1fr; gap:14px; }
      .cards{ grid-template-columns:1fr 1fr 1fr; gap:14px; }

      .hero img{ height:320px; } /* desktop */
      .heroTitle .h1{ font-size:20px; }
      .ctaButton{
        display:inline-block;
        width:auto;
        padding:14px 24px;
        border-radius:999px;
      }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="panel">

      <div class="hero">
        <img src="banner.png" alt="Rafael Rocha • Consultoria Nutricional">
        <div class="heroTitle">
          <div class="h1">Rafael Nutri • Calculadora Nutricional</div>
          <div class="insta">@rafaelnutripf</div>
        </div>
      </div>

      <div class="content">

        <div class="disclaimerBalloon">
          Ferramenta educativa. Resultados são estimativas e podem variar conforme método de avaliação.
        </div>

        <div class="grid">
          <div class="field">
            <label>Sexo</label>
            <select id="sexo">
              <option value="M">Masculino</option>
              <option value="F">Feminino</option>
            </select>
          </div>

          <div class="field">
            <label>Biotipo (obrigatório)</label>
            <select id="biotipo">
              <option value="ecto">Ectomorfo</option>
              <option value="meso" selected>Mesomorfo</option>
              <option value="endo">Endomorfo</option>
            </select>

            <div class="biotipoInfo">
              <strong>Como escolher o biotipo (prático)</strong>
              <ul>
                <li><b>Ectomorfo:</b> estrutura mais fina; dificuldade para ganhar peso/massa.</li>
                <li><b>Mesomorfo:</b> equilíbrio; tende a ganhar músculo com mais facilidade.</li>
                <li><b>Endomorfo:</b> ganha gordura com facilidade (abdômen/quadril).</li>
              </ul>
              <div class="mini">
                <b>Se estiver em dúvida:</b> marque <b>Mesomorfo</b>.<br>
                “engorda fácil” → <b>Endomorfo</b> | “não ganha peso” → <b>Ectomorfo</b>.
              </div>
            </div>
          </div>

          <div class="field">
            <label>Idade</label>
            <input id="idade" type="number" placeholder="Ex: 28">
          </div>

          <div class="field">
            <label>Peso (kg)</label>
            <input id="peso" type="number" step="0.1" placeholder="Ex: 72,5">
          </div>

          <div class="field">
            <label>Altura (cm)</label>
            <input id="altura" type="number" placeholder="Ex: 175">
          </div>

          <div class="field">
            <label>Cintura (cm) (opcional para BF)</label>
            <input id="cintura" type="number" step="0.1" placeholder="Ex: 82">
          </div>

          <div class="field">
            <label>Pescoço (cm) (opcional para BF)</label>
            <input id="pescoco" type="number" step="0.1" placeholder="Ex: 38">
          </div>

          <div class="field hidden" id="quadWrap">
            <label>Quadril (cm) (opcional para BF - feminino)</label>
            <input id="quadril" type="number" step="0.1" placeholder="Ex: 98">
          </div>

          <div class="field">
            <label>Frequência de treino</label>
            <select id="atividade">
              <option value="1.08">Não treina</option>
              <option value="1.20">Treina 3x/sem</option>
              <option value="1.30">Treina até 5x/sem</option>
              <option value="1.50">Treina 7x/sem</option>
            </select>
          </div>

          <div class="field">
            <label>Objetivo</label>
            <select id="objetivo">
              <option value="manter">Manter</option>
              <option value="ganhar">Ganhar massa (+300 kcal)</option>
              <option value="perder">Perder gordura (-300 kcal)</option>
            </select>
          </div>
        </div>

        <div class="cards">
          <div class="card">
            <h3>Percentual de Gordura (BF)</h3>

            <div id="bfNormal">
              <div class="big" id="outBf">—</div>
              <div class="small" id="outBfInfo">
                Preencha cintura + pescoço (e quadril no feminino) para estimar.
              </div>

              <div class="bfScaleWrap hidden" id="bfScaleWrap">
                <div class="bfTopRow">
                  <div class="small" style="margin:0">Classificação</div>
                  <div class="bfBadge" id="bfBadge">—</div>
                </div>

                <div class="bfScale">
                  <div class="bfNeedle" id="bfNeedle" style="left:50%"></div>
                  <div class="bfDot" id="bfDot" style="left:50%"></div>
                </div>

                <div class="bfLabels">
                  <span id="bfMinLbl">0%</span>
                  <span id="bfMaxLbl">40%</span>
                </div>

                <div class="bfLegend" id="bfLegend">—</div>
                <div class="bfInsight" id="bfInsight">—</div>
              </div>
            </div>

            <div id="bfHow" class="hidden">
              <div class="howBox">
                <div class="howTitle">Como medir (fita métrica)</div>
                <ul class="howList">
                  <li><b>Cintura:</b> na altura do umbigo, relaxado, sem “puxar barriga”.</li>
                  <li><b>Pescoço:</b> no meio do pescoço, fita encostada sem apertar.</li>
                  <li><b>Quadril (feminino):</b> na parte mais larga do bumbum.</li>
                  <li>Faça <b>2 medidas</b> e use a <b>média</b>.</li>
                </ul>
              </div>
              <div class="small" style="margin-top:10px">
                Sem essas medidas, a calculadora mostra TMB e calorias diárias, mas não estima BF.
              </div>
            </div>
          </div>

          <div class="card">
            <h3>Taxa Metabólica Basal (TMB)</h3>
            <div class="big" id="outTmb">—</div>
            <div class="small">Energia mínima em repouso.</div>
          </div>

          <div class="card">
            <h3>Calorias diárias (com treino/objetivo)</h3>
            <div class="big" id="outTarget">—</div>
            <div class="small" id="outTargetInfo">Preencha idade, peso e altura.</div>
          </div>
        </div>

        <div class="resultBox hidden" id="finalBox">
          <div class="resultTitle">Plano nutricional</div>
          <div class="resultLine" id="finalLine1"></div>
          <div class="resultLine" id="finalP"></div>
          <div class="resultLine" id="finalC"></div>
          <div class="resultLine" id="finalF"></div>
          <div class="resultLine" style="font-weight:950;margin-top:8px" id="finalSummary"></div>
        </div>

        <div class="ctaBox">
          <a class="ctaButton" target="_blank"
             href="https://wa.me/5554991766684?text=Oi%20Rafael!%20Usei%20a%20calculadora%20nutricional%20do%20seu%20site%20e%20quero%20uma%20avalia%C3%A7%C3%A3o%20personalizada.">
            Quero uma avaliação personalizada
          </a>
          <div class="ctaSub">Atendimento individual • Consultoria online</div>
        </div>

        <div class="aviso">
          <strong>⚠️ Aviso Importante</strong>
          Esta calculadora é apenas para fins educacionais. Os resultados são estimativas baseadas em fórmulas padrão
          e podem não refletir com precisão sua composição corporal real. Para avaliações mais precisas,
          consulte um profissional de saúde qualificado.
        </div>

        <div class="footer">
          Criado por <b>Rafael Nutri</b> • @rafaelnutripf<br/>
          Consultoria online
        </div>

      </div>
    </div>
  </div>

  <script>
    const $ = (id) => document.getElementById(id);
    const r = (n) => Math.round(n);
    const r1 = (n) => Math.round(n * 10) / 10;
    const clamp = (x, min, max) => Math.max(min, Math.min(max, x));

    function bmr(sexo, pesoKg, alturaCm, idade){
      return sexo === "M"
        ? (10*pesoKg + 6.25*alturaCm - 5*idade + 5)
        : (10*pesoKg + 6.25*alturaCm - 5*idade - 161);
    }

    function bfNavyBase(sexo, cinturaCm, quadrilCm, pescocoCm, alturaCm){
      const cmToIn = (cm) => cm / 2.54;
      const log10 = (x) => Math.log(x) / Math.LN10;

      const cintura = cmToIn(cinturaCm);
      const quadril = cmToIn(quadrilCm);
      const pescoco = cmToIn(pescocoCm);
      const altura  = cmToIn(alturaCm);

      if(sexo === "M"){
        const x = cintura - pescoco;
        return 86.010*log10(x) - 70.041*log10(altura) + 36.76;
      } else {
        const y = cintura + quadril - pescoco;
        return 163.205*log10(y) - 97.684*log10(altura) - 78.387;
      }
    }

    function bfCalibrado(sexo, bf){
      return sexo === "F"
        ? clamp(1.61841*bf - 32.49609, 2, 60)
        : clamp(0.52376*bf + 6.89238, 2, 60);
    }

    function bfAdj(b){
      return b === "ecto" ? 0 : (b === "meso" ? 0.5 : 1);
    }

    function macros(cal, peso){
      const prot = 2 * peso;
      const fat  = (cal * 0.25) / 9;
      const carb = (cal - (prot*4 + fat*9)) / 4;
      return { prot, fat, carb };
    }

    function bfScaleConfig(sexo){
      if(sexo === "F"){
        return {
          min: 10, max: 45,
          bands: [
            { to:13, label:"Essencial", desc:"Mínimo necessário para funções corporais vitais (não sustentável a longo prazo para a maioria)" },
            { to:20, label:"Atleta/Fitness", desc:"Nível baixo, comum em atletas e fisiculturistas, com abdômen definido" },
            { to:32, label:"Saudável/Normal", desc:"Faixa ideal para a saúde geral, com menor risco de doenças" },
            { to:39, label:"Sobrepeso", desc:"Acima da faixa saudável, indica necessidade de atenção" },
            { to:45, label:"Obesidade", desc:"Nível elevado, associado a maiores riscos de saúde" },
          ],
          legend:"Mulher: 10–13 Essencial • 14–20 Atleta/Fitness • 21–32 Saudável/Normal • 32–39 Sobrepeso • >39 Obesidade"
        };
      }
      return {
        min: 2, max: 35,
        bands: [
          { to:5,  label:"Gordura Essencial", desc:"Mínimo necessário para funções corporais vitais. Não é sustentável a longo prazo para a maioria das pessoas." },
          { to:13, label:"Atletas/Fitness", desc:"Nível comum entre atletas e fisiculturistas, geralmente com músculos bem definidos e abdômen visível. Exige disciplina rigorosa na dieta." },
          { to:20, label:"Saudável/Normal", desc:"Faixa ideal para a saúde geral, com menor risco de doenças." },
          { to:24, label:"Aceitável/Moderado", desc:"Nível considerado aceitável, mas aproximando-se da faixa de risco." },
          { to:35, label:"Alto/Obesidade", desc:"Indica excesso de gordura e aumento do risco de doenças relacionadas à obesidade." },
        ],
        legend:"Homem: 2–5 Essencial • 6–13 Atletas/Fitness • 14–20 Saudável/Normal • 21–24 Aceitável/Moderado • ≥25 Alto/Obesidade"
      };
    }

    function bfBand(sexo, bf){
      const cfg = bfScaleConfig(sexo);
      for(const b of cfg.bands){
        if(bf <= b.to) return b;
      }
      return cfg.bands[cfg.bands.length-1];
    }

    function setScale(sexo, bf){
      const cfg = bfScaleConfig(sexo);
      $("bfScaleWrap").classList.remove("hidden");
      $("bfMinLbl").innerText = cfg.min + "%";
      $("bfMaxLbl").innerText = cfg.max + "%";
      $("bfLegend").innerText = cfg.legend;

      const band = bfBand(sexo, bf);
      $("bfBadge").innerText = band.label;
      $("bfInsight").innerHTML = "<b>" + band.desc + ".</b>";

      const pos = clamp((bf - cfg.min) / (cfg.max - cfg.min), 0, 1) * 100;
      $("bfNeedle").style.left = pos + "%";
      $("bfDot").style.left = pos + "%";
    }

    function hideScale(){ $("bfScaleWrap").classList.add("hidden"); }

    function calc(){
      const sexo = $("sexo").value;
      const bio  = $("biotipo").value;

      $("quadWrap").classList.toggle("hidden", sexo !== "F");
      if(sexo !== "F") $("quadril").value = "";

      const idade  = +$("idade").value;
      const peso   = +$("peso").value;
      const altura = +$("altura").value;

      const cintura = +$("cintura").value;
      const pescoco = +$("pescoco").value;
      const quadril = +$("quadril").value;

      const atv = +$("atividade").value;
      const obj = $("objetivo").value;

      if(idade && peso && altura){
        const tmb = bmr(sexo, peso, altura, idade);
        $("outTmb").innerText = r(tmb) + " kcal";

        let cal = tmb * atv;
        if(obj === "ganhar") cal += 300;
        if(obj === "perder") cal -= 300;

        $("outTarget").innerText = r(cal) + " kcal";
        $("outTargetInfo").innerText = "Inclui rotina e treino.";

        const m = macros(cal, peso);
        $("finalBox").classList.remove("hidden");
        $("finalLine1").innerHTML = "Meta diária: <b>" + r(cal) + " kcal</b>";
        $("finalP").innerHTML = "Proteína: <b>" + r(m.prot) + " g</b> (2 g/kg)";
        $("finalC").innerHTML = "Carboidrato: <b>" + r(m.carb) + " g</b>";
        $("finalF").innerHTML = "Gordura: <b>" + r(m.fat) + " g</b>";
        $("finalSummary").innerText =
          r(cal) + " kcal — " + r(m.prot) + "g P • " + r(m.carb) + "g C • " + r(m.fat) + "g G";
      } else {
        $("outTmb").innerText = "—";
        $("outTarget").innerText = "—";
        $("outTargetInfo").innerText = "Preencha idade, peso e altura.";
        $("finalBox").classList.add("hidden");
      }

      const medidasOk = altura && cintura && pescoco && (sexo === "M" || (sexo === "F" && quadril));

      if(!medidasOk){
        $("outBf").innerText = "—";
        $("outBfInfo").innerText = "Faltam medidas para estimar BF.";
        $("bfNormal").classList.add("hidden");
        $("bfHow").classList.remove("hidden");
        hideScale();
        return;
      }

      $("bfHow").classList.add("hidden");
      $("bfNormal").classList.remove("hidden");

      let bf = bfCalibrado(sexo, bfNavyBase(sexo, cintura, quadril, pescoco, altura));
      bf += bfAdj(bio);
      bf = clamp(bf, 2, 60);

      $("outBf").innerText = r1(bf) + "%";
      $("outBfInfo").innerText = "Estimativa calibrada + ajuste de biotipo.";
      setScale(sexo, bf);
    }

    document.querySelectorAll("input,select").forEach(el=>{
      el.addEventListener("input", calc);
      el.addEventListener("change", calc);
    });

    calc();
  </script>
</body>
</html>
